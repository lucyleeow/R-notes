<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 14 Package development | R notes</title>
  <meta name="description" content="Guide to R.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 14 Package development | R notes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Guide to R." />
  <meta name="github-repo" content="lucyleeow/R_notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Package development | R notes" />
  
  <meta name="twitter:description" content="Guide to R." />
  

<meta name="author" content="Lucy Liu">


<meta name="date" content="2019-03-08">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="rmarkdown.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#r-files"><i class="fa fa-check"></i><b>2.1</b> R files</a><ul>
<li class="chapter" data-level="2.1.1" data-path="introduction.html"><a href="introduction.html#memory"><i class="fa fa-check"></i><b>2.1.1</b> Memory</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction.html"><a href="introduction.html#r-project"><i class="fa fa-check"></i><b>2.1.2</b> R project</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#packages"><i class="fa fa-check"></i><b>2.2</b> Packages</a><ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#library"><i class="fa fa-check"></i><b>2.2.1</b> Library</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction.html"><a href="introduction.html#bioconductor"><i class="fa fa-check"></i><b>2.2.2</b> Bioconductor</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#basics"><i class="fa fa-check"></i><b>2.3</b> Basics</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#arithmetic"><i class="fa fa-check"></i><b>2.3.1</b> Arithmetic</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#help"><i class="fa fa-check"></i><b>2.4</b> Help</a></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#data-types"><i class="fa fa-check"></i><b>2.5</b> Data types</a><ul>
<li class="chapter" data-level="2.5.1" data-path="introduction.html"><a href="introduction.html#numeric"><i class="fa fa-check"></i><b>2.5.1</b> Numeric</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction.html"><a href="introduction.html#coercion"><i class="fa fa-check"></i><b>2.5.2</b> Coercion</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction.html"><a href="introduction.html#factors"><i class="fa fa-check"></i><b>2.5.3</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#data-structures"><i class="fa fa-check"></i><b>2.6</b> Data structures</a><ul>
<li class="chapter" data-level="2.6.1" data-path="introduction.html"><a href="introduction.html#atomic-vector"><i class="fa fa-check"></i><b>2.6.1</b> Atomic vector</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction.html"><a href="introduction.html#lists"><i class="fa fa-check"></i><b>2.6.2</b> Lists</a></li>
<li class="chapter" data-level="2.6.3" data-path="introduction.html"><a href="introduction.html#matrix"><i class="fa fa-check"></i><b>2.6.3</b> Matrix</a></li>
<li class="chapter" data-level="2.6.4" data-path="introduction.html"><a href="introduction.html#array"><i class="fa fa-check"></i><b>2.6.4</b> Array</a></li>
<li class="chapter" data-level="2.6.5" data-path="introduction.html"><a href="introduction.html#dataframes"><i class="fa fa-check"></i><b>2.6.5</b> Dataframes</a></li>
<li class="chapter" data-level="2.6.6" data-path="introduction.html"><a href="introduction.html#high-dimension-structures"><i class="fa fa-check"></i><b>2.6.6</b> High dimension structures</a></li>
<li class="chapter" data-level="2.6.7" data-path="introduction.html"><a href="introduction.html#attributes"><i class="fa fa-check"></i><b>2.6.7</b> Attributes</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#nas"><i class="fa fa-check"></i><b>2.7</b> NAs</a></li>
<li class="chapter" data-level="2.8" data-path="introduction.html"><a href="introduction.html#importing-exporting"><i class="fa fa-check"></i><b>2.8</b> Importing &amp; exporting</a></li>
<li class="chapter" data-level="2.9" data-path="introduction.html"><a href="introduction.html#saving-objects"><i class="fa fa-check"></i><b>2.9</b> Saving objects</a><ul>
<li class="chapter" data-level="2.9.1" data-path="introduction.html"><a href="introduction.html#feather"><i class="fa fa-check"></i><b>2.9.1</b> feather</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html"><i class="fa fa-check"></i><b>3</b> Data wrangling - base R</a><ul>
<li class="chapter" data-level="3.1" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#useful-functions"><i class="fa fa-check"></i><b>3.1</b> Useful functions</a></li>
<li class="chapter" data-level="3.2" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#subsetting"><i class="fa fa-check"></i><b>3.2</b> Subsetting</a></li>
<li class="chapter" data-level="3.3" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#apply-family"><i class="fa fa-check"></i><b>3.3</b> Apply family</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#uses"><i class="fa fa-check"></i><b>3.3.1</b> Uses</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#docall"><i class="fa fa-check"></i><b>3.4</b> do.call()</a></li>
<li class="chapter" data-level="3.5" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#do.call-vs-lapply-vs-map"><i class="fa fa-check"></i><b>3.5</b> do.call vs lapply vs map</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html"><i class="fa fa-check"></i><b>4</b> Data wrangling - tidyverse</a><ul>
<li class="chapter" data-level="4.1" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#tibbles"><i class="fa fa-check"></i><b>4.1</b> Tibbles</a></li>
<li class="chapter" data-level="4.2" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#readr"><i class="fa fa-check"></i><b>4.2</b> readr</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#parsing"><i class="fa fa-check"></i><b>4.2.1</b> Parsing</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#exporting"><i class="fa fa-check"></i><b>4.2.2</b> Exporting</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#dplyr"><i class="fa fa-check"></i><b>4.3</b> dplyr</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#subsetting-1"><i class="fa fa-check"></i><b>4.3.1</b> Subsetting</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#the-pipe"><i class="fa fa-check"></i><b>4.3.2</b> The pipe %&gt;%</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#filter"><i class="fa fa-check"></i><b>4.3.3</b> filter</a></li>
<li class="chapter" data-level="4.3.4" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#select"><i class="fa fa-check"></i><b>4.3.4</b> select</a></li>
<li class="chapter" data-level="4.3.5" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#mutate"><i class="fa fa-check"></i><b>4.3.5</b> mutate</a></li>
<li class="chapter" data-level="4.3.6" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#case_when"><i class="fa fa-check"></i><b>4.3.6</b> case_when</a></li>
<li class="chapter" data-level="4.3.7" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#summarise"><i class="fa fa-check"></i><b>4.3.7</b> summarise</a></li>
<li class="chapter" data-level="4.3.8" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#group_by"><i class="fa fa-check"></i><b>4.3.8</b> group_by</a></li>
<li class="chapter" data-level="4.3.9" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#n_distinct"><i class="fa fa-check"></i><b>4.3.9</b> n_distinct</a></li>
<li class="chapter" data-level="4.3.10" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#at-_all-_if-at-all-if"><i class="fa fa-check"></i><b>4.3.10</b> _at(), _all(), _if() {###at-all-if}</a></li>
<li class="chapter" data-level="4.3.11" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#own-functions"><i class="fa fa-check"></i><b>4.3.11</b> Own functions</a></li>
<li class="chapter" data-level="4.3.12" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#join"><i class="fa fa-check"></i><b>4.3.12</b> Join</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#tidyr"><i class="fa fa-check"></i><b>4.4</b> tidyr</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#gather"><i class="fa fa-check"></i><b>4.4.1</b> gather</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#spread"><i class="fa fa-check"></i><b>4.4.2</b> spread</a></li>
<li class="chapter" data-level="4.4.3" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#separate"><i class="fa fa-check"></i><b>4.4.3</b> separate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="string-manipulation.html"><a href="string-manipulation.html"><i class="fa fa-check"></i><b>5</b> String manipulation</a><ul>
<li class="chapter" data-level="5.1" data-path="string-manipulation.html"><a href="string-manipulation.html#grep-family"><i class="fa fa-check"></i><b>5.1</b> Grep family</a><ul>
<li class="chapter" data-level="5.1.1" data-path="string-manipulation.html"><a href="string-manipulation.html#locating-pattern-within-string"><i class="fa fa-check"></i><b>5.1.1</b> Locating pattern within string</a></li>
<li class="chapter" data-level="5.1.2" data-path="string-manipulation.html"><a href="string-manipulation.html#replacments"><i class="fa fa-check"></i><b>5.1.2</b> Replacments</a></li>
<li class="chapter" data-level="5.1.3" data-path="string-manipulation.html"><a href="string-manipulation.html#backreferences"><i class="fa fa-check"></i><b>5.1.3</b> Backreferences</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="string-manipulation.html"><a href="string-manipulation.html#regular-expressions"><i class="fa fa-check"></i><b>5.2</b> Regular expressions</a><ul>
<li class="chapter" data-level="5.2.1" data-path="string-manipulation.html"><a href="string-manipulation.html#quantifiers"><i class="fa fa-check"></i><b>5.2.1</b> Quantifiers</a></li>
<li class="chapter" data-level="5.2.2" data-path="string-manipulation.html"><a href="string-manipulation.html#position"><i class="fa fa-check"></i><b>5.2.2</b> Position</a></li>
<li class="chapter" data-level="5.2.3" data-path="string-manipulation.html"><a href="string-manipulation.html#operators"><i class="fa fa-check"></i><b>5.2.3</b> Operators</a></li>
<li class="chapter" data-level="5.2.4" data-path="string-manipulation.html"><a href="string-manipulation.html#character-classes"><i class="fa fa-check"></i><b>5.2.4</b> Character classes</a></li>
<li class="chapter" data-level="5.2.5" data-path="string-manipulation.html"><a href="string-manipulation.html#examples"><i class="fa fa-check"></i><b>5.2.5</b> Examples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>6</b> Control flow</a><ul>
<li class="chapter" data-level="6.1" data-path="control-flow.html"><a href="control-flow.html#for-loops"><i class="fa fa-check"></i><b>6.1</b> For loops</a><ul>
<li class="chapter" data-level="6.1.1" data-path="control-flow.html"><a href="control-flow.html#creating-empty-data-structures"><i class="fa fa-check"></i><b>6.1.1</b> Creating empty data structures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>7</b> Functions</a><ul>
<li class="chapter" data-level="7.1" data-path="functions.html"><a href="functions.html#source-code"><i class="fa fa-check"></i><b>7.1</b> Source code</a></li>
<li class="chapter" data-level="7.2" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>7.2</b> Writing functions</a><ul>
<li class="chapter" data-level="7.2.1" data-path="functions.html"><a href="functions.html#evaluation"><i class="fa fa-check"></i><b>7.2.1</b> Evaluation</a></li>
<li class="chapter" data-level="7.2.2" data-path="functions.html"><a href="functions.html#checking-inputs"><i class="fa fa-check"></i><b>7.2.2</b> Checking inputs</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="functions.html"><a href="functions.html#messages"><i class="fa fa-check"></i><b>7.3</b> Messages</a><ul>
<li class="chapter" data-level="7.3.1" data-path="functions.html"><a href="functions.html#optional-arguments"><i class="fa fa-check"></i><b>7.3.1</b> Optional arguments</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="functions.html"><a href="functions.html#functions-with-dplyr"><i class="fa fa-check"></i><b>7.4</b> Functions with dplyr</a><ul>
<li class="chapter" data-level="7.4.1" data-path="functions.html"><a href="functions.html#non-standard-evaluation"><i class="fa fa-check"></i><b>7.4.1</b> Non standard evaluation</a></li>
<li class="chapter" data-level="7.4.2" data-path="functions.html"><a href="functions.html#writing-dplyr-functions"><i class="fa fa-check"></i><b>7.4.2</b> Writing dplyr functions</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="functions.html"><a href="functions.html#ggplot"><i class="fa fa-check"></i><b>7.5</b> ggplot</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-table.html"><a href="data-table.html"><i class="fa fa-check"></i><b>8</b> data.table</a><ul>
<li class="chapter" data-level="8.1" data-path="data-table.html"><a href="data-table.html#fread"><i class="fa fa-check"></i><b>8.1</b> fread</a></li>
<li class="chapter" data-level="8.2" data-path="data-table.html"><a href="data-table.html#subsetting-2"><i class="fa fa-check"></i><b>8.2</b> Subsetting</a><ul>
<li class="chapter" data-level="8.2.1" data-path="data-table.html"><a href="data-table.html#rows"><i class="fa fa-check"></i><b>8.2.1</b> Rows</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-table.html"><a href="data-table.html#columns"><i class="fa fa-check"></i><b>8.2.2</b> Columns</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-table.html"><a href="data-table.html#functions-1"><i class="fa fa-check"></i><b>8.3</b> Functions</a></li>
<li class="chapter" data-level="8.4" data-path="data-table.html"><a href="data-table.html#grouping"><i class="fa fa-check"></i><b>8.4</b> Grouping</a><ul>
<li class="chapter" data-level="8.4.1" data-path="data-table.html"><a href="data-table.html#expressions"><i class="fa fa-check"></i><b>8.4.1</b> Expressions</a></li>
<li class="chapter" data-level="8.4.2" data-path="data-table.html"><a href="data-table.html#order"><i class="fa fa-check"></i><b>8.4.2</b> Order</a></li>
<li class="chapter" data-level="8.4.3" data-path="data-table.html"><a href="data-table.html#functions-on-groups"><i class="fa fa-check"></i><b>8.4.3</b> Functions on groups</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="data-table.html"><a href="data-table.html#keys"><i class="fa fa-check"></i><b>8.5</b> Keys</a></li>
<li class="chapter" data-level="8.6" data-path="data-table.html"><a href="data-table.html#set"><i class="fa fa-check"></i><b>8.6</b> set</a></li>
<li class="chapter" data-level="8.7" data-path="data-table.html"><a href="data-table.html#reshaping"><i class="fa fa-check"></i><b>8.7</b> Reshaping</a></li>
<li class="chapter" data-level="8.8" data-path="data-table.html"><a href="data-table.html#merge"><i class="fa fa-check"></i><b>8.8</b> Merge</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="plotting-in-r.html"><a href="plotting-in-r.html"><i class="fa fa-check"></i><b>9</b> Plotting in R</a><ul>
<li class="chapter" data-level="9.1" data-path="plotting-in-r.html"><a href="plotting-in-r.html#base-r-plotting"><i class="fa fa-check"></i><b>9.1</b> Base R plotting</a></li>
<li class="chapter" data-level="9.2" data-path="plotting-in-r.html"><a href="plotting-in-r.html#par"><i class="fa fa-check"></i><b>9.2</b> par</a></li>
<li class="chapter" data-level="9.3" data-path="plotting-in-r.html"><a href="plotting-in-r.html#combining-plots"><i class="fa fa-check"></i><b>9.3</b> Combining plots</a></li>
<li class="chapter" data-level="9.4" data-path="plotting-in-r.html"><a href="plotting-in-r.html#text"><i class="fa fa-check"></i><b>9.4</b> Text</a></li>
<li class="chapter" data-level="9.5" data-path="plotting-in-r.html"><a href="plotting-in-r.html#lines"><i class="fa fa-check"></i><b>9.5</b> Lines</a></li>
<li class="chapter" data-level="9.6" data-path="plotting-in-r.html"><a href="plotting-in-r.html#legend"><i class="fa fa-check"></i><b>9.6</b> Legend</a></li>
<li class="chapter" data-level="9.7" data-path="plotting-in-r.html"><a href="plotting-in-r.html#two-axis"><i class="fa fa-check"></i><b>9.7</b> Two axis</a></li>
<li class="chapter" data-level="9.8" data-path="plotting-in-r.html"><a href="plotting-in-r.html#palette"><i class="fa fa-check"></i><b>9.8</b> Palette</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>10</b> ggplot2</a><ul>
<li class="chapter" data-level="10.1" data-path="ggplot2.html"><a href="ggplot2.html#introduction-1"><i class="fa fa-check"></i><b>10.1</b> Introduction</a><ul>
<li class="chapter" data-level="10.1.1" data-path="ggplot2.html"><a href="ggplot2.html#geoms"><i class="fa fa-check"></i><b>10.1.1</b> geoms</a></li>
<li class="chapter" data-level="10.1.2" data-path="ggplot2.html"><a href="ggplot2.html#layering"><i class="fa fa-check"></i><b>10.1.2</b> Layering</a></li>
<li class="chapter" data-level="10.1.3" data-path="ggplot2.html"><a href="ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>10.1.3</b> Aesthetics</a></li>
<li class="chapter" data-level="10.1.4" data-path="ggplot2.html"><a href="ggplot2.html#syntax"><i class="fa fa-check"></i><b>10.1.4</b> Syntax</a></li>
<li class="chapter" data-level="10.1.5" data-path="ggplot2.html"><a href="ggplot2.html#stat"><i class="fa fa-check"></i><b>10.1.5</b> Stat</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="ggplot2.html"><a href="ggplot2.html#geom_point"><i class="fa fa-check"></i><b>10.2</b> geom_point</a><ul>
<li class="chapter" data-level="10.2.1" data-path="ggplot2.html"><a href="ggplot2.html#jitter"><i class="fa fa-check"></i><b>10.2.1</b> Jitter</a></li>
<li class="chapter" data-level="10.2.2" data-path="ggplot2.html"><a href="ggplot2.html#labels"><i class="fa fa-check"></i><b>10.2.2</b> Labels</a></li>
<li class="chapter" data-level="10.2.3" data-path="ggplot2.html"><a href="ggplot2.html#colour-points"><i class="fa fa-check"></i><b>10.2.3</b> Colour points</a></li>
<li class="chapter" data-level="10.2.4" data-path="ggplot2.html"><a href="ggplot2.html#matrix-of-plots"><i class="fa fa-check"></i><b>10.2.4</b> Matrix of plots</a></li>
<li class="chapter" data-level="10.2.5" data-path="ggplot2.html"><a href="ggplot2.html#adding-lines"><i class="fa fa-check"></i><b>10.2.5</b> Adding lines</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="ggplot2.html"><a href="ggplot2.html#bar-graphs-histograms"><i class="fa fa-check"></i><b>10.3</b> Bar graphs &amp; histograms</a></li>
<li class="chapter" data-level="10.4" data-path="ggplot2.html"><a href="ggplot2.html#geom_boxplot"><i class="fa fa-check"></i><b>10.4</b> geom_boxplot</a></li>
<li class="chapter" data-level="10.5" data-path="ggplot2.html"><a href="ggplot2.html#facets"><i class="fa fa-check"></i><b>10.5</b> Facets</a></li>
<li class="chapter" data-level="10.6" data-path="ggplot2.html"><a href="ggplot2.html#reordering-factors"><i class="fa fa-check"></i><b>10.6</b> Reordering factors</a></li>
<li class="chapter" data-level="10.7" data-path="ggplot2.html"><a href="ggplot2.html#coordinate-systems"><i class="fa fa-check"></i><b>10.7</b> Coordinate systems</a></li>
<li class="chapter" data-level="10.8" data-path="ggplot2.html"><a href="ggplot2.html#reference-lines"><i class="fa fa-check"></i><b>10.8</b> Reference lines</a></li>
<li class="chapter" data-level="10.9" data-path="ggplot2.html"><a href="ggplot2.html#error-bars"><i class="fa fa-check"></i><b>10.9</b> Error bars</a></li>
<li class="chapter" data-level="10.10" data-path="ggplot2.html"><a href="ggplot2.html#appearance"><i class="fa fa-check"></i><b>10.10</b> Appearance</a><ul>
<li class="chapter" data-level="10.10.1" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i><b>10.10.1</b> Scales</a></li>
</ul></li>
<li class="chapter" data-level="10.11" data-path="ggplot2.html"><a href="ggplot2.html#dplyr-ggplot2"><i class="fa fa-check"></i><b>10.11</b> dplyr &amp; ggplot2</a></li>
<li class="chapter" data-level="10.12" data-path="ggplot2.html"><a href="ggplot2.html#saving-graphs"><i class="fa fa-check"></i><b>10.12</b> Saving graphs</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="other-visualisation-packages.html"><a href="other-visualisation-packages.html"><i class="fa fa-check"></i><b>11</b> Other visualisation packages</a><ul>
<li class="chapter" data-level="11.1" data-path="other-visualisation-packages.html"><a href="other-visualisation-packages.html#pheatmap"><i class="fa fa-check"></i><b>11.1</b> pheatmap</a></li>
<li class="chapter" data-level="11.2" data-path="other-visualisation-packages.html"><a href="other-visualisation-packages.html#venndiagram"><i class="fa fa-check"></i><b>11.2</b> VennDiagram</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>12</b> Statistics</a></li>
<li class="chapter" data-level="13" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>13</b> Rmarkdown</a><ul>
<li class="chapter" data-level="13.1" data-path="rmarkdown.html"><a href="rmarkdown.html#basics-1"><i class="fa fa-check"></i><b>13.1</b> Basics</a></li>
<li class="chapter" data-level="13.2" data-path="rmarkdown.html"><a href="rmarkdown.html#knitr"><i class="fa fa-check"></i><b>13.2</b> Knitr</a><ul>
<li class="chapter" data-level="13.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#yamal-header"><i class="fa fa-check"></i><b>13.2.1</b> YAMAL header</a></li>
<li class="chapter" data-level="13.2.2" data-path="rmarkdown.html"><a href="rmarkdown.html#chunk-options"><i class="fa fa-check"></i><b>13.2.2</b> Chunk options</a></li>
<li class="chapter" data-level="13.2.3" data-path="rmarkdown.html"><a href="rmarkdown.html#global-options"><i class="fa fa-check"></i><b>13.2.3</b> Global options</a></li>
<li class="chapter" data-level="13.2.4" data-path="rmarkdown.html"><a href="rmarkdown.html#common-problems"><i class="fa fa-check"></i><b>13.2.4</b> Common problems</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="rmarkdown.html"><a href="rmarkdown.html#bookdown"><i class="fa fa-check"></i><b>13.3</b> Bookdown</a><ul>
<li class="chapter" data-level="13.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#rendering"><i class="fa fa-check"></i><b>13.3.1</b> Rendering</a></li>
<li class="chapter" data-level="13.3.2" data-path="rmarkdown.html"><a href="rmarkdown.html#structure"><i class="fa fa-check"></i><b>13.3.2</b> Structure</a></li>
<li class="chapter" data-level="13.3.3" data-path="rmarkdown.html"><a href="rmarkdown.html#yamal-header-1"><i class="fa fa-check"></i><b>13.3.3</b> YAMAL header</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="rmarkdown.html"><a href="rmarkdown.html#html-on-github"><i class="fa fa-check"></i><b>13.4</b> HTML on Github</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="package-development.html"><a href="package-development.html"><i class="fa fa-check"></i><b>14</b> Package development</a><ul>
<li class="chapter" data-level="14.1" data-path="package-development.html"><a href="package-development.html#naming"><i class="fa fa-check"></i><b>14.1</b> Naming</a></li>
<li class="chapter" data-level="14.2" data-path="package-development.html"><a href="package-development.html#states"><i class="fa fa-check"></i><b>14.2</b> States</a><ul>
<li class="chapter" data-level="14.2.1" data-path="package-development.html"><a href="package-development.html#source"><i class="fa fa-check"></i><b>14.2.1</b> Source</a></li>
<li class="chapter" data-level="14.2.2" data-path="package-development.html"><a href="package-development.html#bundled"><i class="fa fa-check"></i><b>14.2.2</b> Bundled</a></li>
<li class="chapter" data-level="14.2.3" data-path="package-development.html"><a href="package-development.html#binary-package"><i class="fa fa-check"></i><b>14.2.3</b> Binary package</a></li>
<li class="chapter" data-level="14.2.4" data-path="package-development.html"><a href="package-development.html#installed"><i class="fa fa-check"></i><b>14.2.4</b> Installed</a></li>
<li class="chapter" data-level="14.2.5" data-path="package-development.html"><a href="package-development.html#in-memory"><i class="fa fa-check"></i><b>14.2.5</b> In memory</a></li>
<li class="chapter" data-level="14.2.6" data-path="package-development.html"><a href="package-development.html#summary"><i class="fa fa-check"></i><b>14.2.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="package-development.html"><a href="package-development.html#r-cmd-install"><i class="fa fa-check"></i><b>14.3</b> R CMD install</a></li>
<li class="chapter" data-level="14.4" data-path="package-development.html"><a href="package-development.html#workflow"><i class="fa fa-check"></i><b>14.4</b> Workflow</a></li>
<li class="chapter" data-level="14.5" data-path="package-development.html"><a href="package-development.html#file-structure"><i class="fa fa-check"></i><b>14.5</b> File structure</a></li>
<li class="chapter" data-level="14.6" data-path="package-development.html"><a href="package-development.html#description"><i class="fa fa-check"></i><b>14.6</b> DESCRIPTION</a><ul>
<li class="chapter" data-level="14.6.1" data-path="package-development.html"><a href="package-development.html#imports"><i class="fa fa-check"></i><b>14.6.1</b> Imports</a></li>
<li class="chapter" data-level="14.6.2" data-path="package-development.html"><a href="package-development.html#suggests"><i class="fa fa-check"></i><b>14.6.2</b> Suggests</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="package-development.html"><a href="package-development.html#namespace"><i class="fa fa-check"></i><b>14.7</b> NAMESPACE</a><ul>
<li class="chapter" data-level="14.7.1" data-path="package-development.html"><a href="package-development.html#search-paths"><i class="fa fa-check"></i><b>14.7.1</b> Search paths</a></li>
<li class="chapter" data-level="14.7.2" data-path="package-development.html"><a href="package-development.html#file-syntax"><i class="fa fa-check"></i><b>14.7.2</b> File syntax</a></li>
<li class="chapter" data-level="14.7.3" data-path="package-development.html"><a href="package-development.html#exporting-1"><i class="fa fa-check"></i><b>14.7.3</b> Exporting</a></li>
<li class="chapter" data-level="14.7.4" data-path="package-development.html"><a href="package-development.html#importing"><i class="fa fa-check"></i><b>14.7.4</b> Importing</a></li>
<li class="chapter" data-level="14.7.5" data-path="package-development.html"><a href="package-development.html#exporting-2"><i class="fa fa-check"></i><b>14.7.5</b> Exporting</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="package-development.html"><a href="package-development.html#documentation"><i class="fa fa-check"></i><b>14.8</b> Documentation</a><ul>
<li class="chapter" data-level="14.8.1" data-path="package-development.html"><a href="package-development.html#roxygen2"><i class="fa fa-check"></i><b>14.8.1</b> Roxygen2</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="package-development" class="section level1">
<h1><span class="header-section-number">Chapter 14</span> Package development</h1>
<p>Useful references:</p>
<ul>
<li>Hadley Wickham’s <a href="http://r-pkgs.had.co.nz/intro.html">R packages</a></li>
<li>Hillary Parker’s <a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/">quick guide</a></li>
<li>Damjan Vukcevic’s <a href="http://damjan.vukcevic.net/2016/09/20/writing-and-managing-r-packages/">slides</a></li>
</ul>
<div id="naming" class="section level2">
<h2><span class="header-section-number">14.1</span> Naming</h2>
<ul>
<li>Can only contain letters, numbers and periods (‘.’)</li>
<li>Must start with letter</li>
<li>Cannot end with a period</li>
<li>Hadley recommends against using periods</li>
</ul>
</div>
<div id="states" class="section level2">
<h2><span class="header-section-number">14.2</span> States</h2>
<p>An R package can exist in five states:</p>
<div id="source" class="section level3">
<h3><span class="header-section-number">14.2.1</span> Source</h3>
<p>Development version. Lives on your computer. It is just a directory with DESCRIPTION file, R/ folder etc.</p>
</div>
<div id="bundled" class="section level3">
<h3><span class="header-section-number">14.2.2</span> Bundled</h3>
<p>Package that has been compressed into a single file. By convention, uses the extension ‘.tar.gz’. This means that several files have been reduced to a single file (.tar) then compressed (gz). <code>devtools::build()</code> will create a bundle of your package.</p>
<p>When you decompress a bundle it will look almost the same as your source package. The differences are:</p>
<ul>
<li>Vignettes are built already. In source you may have markdown or latex input. In decompressed bundle, you will only have the html and pdf output. Temp files in source will not be included in the decompressed bundle e.g. things in the ‘src/’ fold.</li>
<li>Any files listed in ‘.Rbuildignore’ will not be included. This is useful for files that are needed to generate the output. In the bundle you only need the output file, thus do not need to include the files used to generate it.</li>
</ul>
</div>
<div id="binary-package" class="section level3">
<h3><span class="header-section-number">14.2.3</span> Binary package</h3>
<p>Single file (like a package bundle) but internal structure is different when uncompressed:</p>
<ul>
<li>Instead of R/, there are 3 files that store the parsed functions in an efficient file format. It is basically the result of loading all the R code and then saving the functions with <code>save()</code>. This is what it looks like:</li>
</ul>
<div class="figure">
<img src="Images/bundle.png" />

</div>
<p>The is a ‘Meta/’ directory (one above) that contains a number of Rds files. These files contact cached metadata about the package - like what topics the help files cover and parsed versions of the DESCRIPTION files. These files make package loading faster by caching costly computations.</p>
<p>The ‘html/’ directory contains files for html help files. Binaries are platform specific.</p>
</div>
<div id="installed" class="section level3">
<h3><span class="header-section-number">14.2.4</span> Installed</h3>
<p>Binary package that’s been decompressed into a package library. Installation involves these steps: source -&gt; bundle, bundle -&gt; binary, binary -&gt; installed - however there are often shortcuts available.</p>
<p>See section <a href="package-development.html#r-cmd-install">14.3</a> (R CMD install) for more details.</p>
</div>
<div id="in-memory" class="section level3">
<h3><span class="header-section-number">14.2.5</span> In memory</h3>
<p>Packages must be loaded into memory to use. There is difference between loading and attaching a package - see section 888 (NAMESPACE) for more.</p>
</div>
<div id="summary" class="section level3">
<h3><span class="header-section-number">14.2.6</span> Summary</h3>
<p>Files present in the root directory for source, bundled and binary versions of devtools.</p>
<div class="figure">
<img src="Images/package-files.png" />

</div>
</div>
</div>
<div id="r-cmd-install" class="section level2">
<h2><span class="header-section-number">14.3</span> R CMD install</h2>
<p>The command line tool ‘R CMD INSTALL’ can install a source, bundle or binary package. Devtools functions provide wrappers that allow you to access this tool from R rather than from the command line.</p>
<ul>
<li><code>build()</code> - converts a package source directory into a single bundled file then intalls the package. Wrapper for R CMD build.</li>
<li><code>install()</code> - install a local development package (into your R system library). Wrapper for R CMD install.
<ul>
<li>It reinstalls the package, detaches the currently loaded version the reloads the new version with <code>library()</code></li>
</ul></li>
<li><code>load_all()</code> - roughly simulates what happens when a package is installed and loaded with <code>library()</code>.
<ul>
<li>It will load R code in the /R folder (and compiled shared objects in /src and data files in /data).</li>
<li>Won’t be available when you close your R session.</li>
<li>It allows you to ‘skip’ install and load a source package directly into memory.</li>
</ul></li>
</ul>
<p>Note that you need to use the above three functions from a working directory OUTSIDE of your package directory! This can be easily done with <code>setwd('..')</code>.</p>
<ul>
<li><code>install_github()</code> - downloads a source package from GitHub, runs <code>build()</code> to make vignettes then uses R CMD install to install.</li>
<li><code>install_url()</code>, <code>install_gitorious()</code>, <code>install_bitbucket()</code> do similar things but just from different websites.</li>
<li><code>install.packages()</code> - looks on CRAN for package, downloads and then installs.
<ul>
<li>The difference between <code>install_github()</code> and <code>install.packages()</code> is that for the latter, packages are often in binary format on CRAN thus do not need to be built before installed.</li>
</ul></li>
</ul>
<p>See the <a href="https://cran.r-project.org/web/packages/devtools/readme/README.html">devtools</a> package documentation for more.</p>
<p>RStudio’s ‘build and reload’ or ‘install and restart’ (depending on the RStudio version) button (or keyboard ‘Ctrl/Cmd + Shift + B’) is similar to <code>load_all()</code>. It lets you skip install and load a source package into memory. It is slower than <code>install_all()</code>. It does not build vignettes like <code>install()</code> does.</p>
<p>Build will make a copy of many of the files - problem for large data files. (See <a href="https://stackoverflow.com/questions/46724623/difference-between-load-all-and-build-reload">this</a> question SO for more).</p>
<p>As discussed below in section <a href="package-development.html#workflow">14.4</a> (Workflow), build and reload will show links between your documentation pages.</p>
<p>Comparison:</p>
<div class="figure">
<img src="Images/loading.png" />

</div>
<p>Summary of the build functions:</p>
<div class="figure">
<img src="Images/installation.png" />

</div>
<p>An installed package is just a binary package that’s been decompressed into a package library.</p>
</div>
<div id="workflow" class="section level2">
<h2><span class="header-section-number">14.4</span> Workflow</h2>
<p>This describes the package writing workflow using roxygen2 to create the documentation and the NAMESPACE files. You can choose to use roxygen2 to only create the documentation or NAMESPACE. If you do not use any of the tags associated with one, it will not alter either the /man or NAMESPACE files.</p>
<ol style="list-style-type: decimal">
<li>Create file structure (see section <a href="#file-system"><strong>??</strong></a> (file system)).</li>
<li>Update DESCRIPTION file.</li>
<li>Write your functions and put them in your R/ folder.</li>
<li>Add roxygen2 comments to your R script to generate documentation and/or update the NAMESPACE file.</li>
<li>Use the function <code>document()</code> to generate the documentation and/or NAMESPACE.
<ul>
<li>You do not need to install or load your package first.</li>
<li>You do not need to give document any arguments. The default is <code>pgk = '.'</code>.</li>
</ul></li>
</ol>
<p><code>roxygenise()</code> vs <code>document()</code> -</p>
<p>Roxygen does live analysis of your source code - loads the code in your package so it can create documentation using values in an R environment, not just source code.</p>
<p><code>roxygenise()</code> - sources all files in R/ <code>document()</code> - sources all files in R/, compiles source code in src/, loads data and generally does an accurate job of simulating package loading It is recommended to use <code>roxygenise()</code> only for simple packages. (See <a href="https://stackoverflow.com/questions/25104108/devtoolsdocument-vs-roxygen2roxygenize">this</a> SO question for more.)</p>
<ol start="6" style="list-style-type: decimal">
<li>Preview documentation with <code>?fun</code> or <code>help(fun)</code>.
<ul>
<li>R looks for an .Rd file containing , parses the file, converts it to HTML and displays it. Generally this looks for Rd files in installed packages BUT if you use <code>load_all()</code>, devtools tells the <code>help()</code> and <code>?</code> how to work with source packages. This preview does NOT work with intra-package links through! You need to install your package for these to work.</li>
</ul></li>
<li>Install your package.</li>
</ol>
</div>
<div id="file-structure" class="section level2">
<h2><span class="header-section-number">14.5</span> File structure</h2>
<p>The minimum files required for an R package are:</p>
<ul>
<li>/R fold with all your function files (.R)</li>
<li>DESCRIPTION file</li>
<li>NAMESPACE file</li>
</ul>
<div class="figure">
<img src="Images/file_struct.png" />

</div>
<ul>
<li>DESCRIPTION file - this file states important things about your package like:
<ul>
<li>Name of package and description of what it does</li>
<li>Version number</li>
<li>Required packages &amp; their versions and the version of R required</li>
<li>Name of author(s) and creator(s) - the creator should be the maintainer of the package</li>
</ul></li>
<li>NAMESPACE file - here you specify which functions you require from other packages and what functions your package makes available to other packages.</li>
<li>/R folder - this folder is where the R functions/code should be.</li>
<li>/man folder - this is where your function documentation/help files will be.</li>
</ul>
<p>There are two ways to generate the files and file structure automatically:</p>
<ol style="list-style-type: decimal">
<li>Use the function <code>devtools::create(&quot;mypackage&quot;)</code> sets up the file structure and provides a skeleton for your DESCRIPTION and NAMESPACE files.</li>
<li>Create a new ‘package’ project using New Directory &gt; R package. Fill in the blanks in the resulting window:</li>
</ol>
<div class="figure">
<img src="Images/package-proj.png" />

</div>
<p>Both of these options work the same and gets you to the same place.</p>
<p>Hadley does NOT recommend using <code>package.skeleton()</code> as this creates extra files you have to delete or modify to get a working package.</p>
</div>
<div id="description" class="section level2">
<h2><span class="header-section-number">14.6</span> DESCRIPTION</h2>
<p>This file is the defining feature of a package. It uses the Debian control format (DCF). Each line consists of a field name and a value, separated by colon. When values span several lines, they must be indented, usually with four spaces.</p>
<pre><code>Package: mypackage
Title: What The Package Does (one line, title case required)
Version: 0.1
Authors@R: person(&quot;First&quot;, &quot;Last&quot;, email = &quot;first.last@example.com&quot;,
                  role = c(&quot;aut&quot;, &quot;cre&quot;))
Description: What the package does (one paragraph)
Depends: R (&gt;= 3.1.0)        # which version of R is required
License: What license is it under?
LazyData: true
Imports:
Suggests:</code></pre>
<p>The last two are important tags that specify packages that are needed or useful for your package.</p>
<div id="imports" class="section level3">
<h3><span class="header-section-number">14.6.1</span> Imports</h3>
<p>Packages listed under imports MUST be present for your package to work. When you install your package, all packages in this list will also be installed if not already. This does NOT mean it will be ‘attached’ to your package (i.e. loaded with <code>library()</code>).</p>
<p>Best practice is to explicitly refer to functions from other packages with <code>package::function()</code> in your .R scripts.</p>
<p>Note on ‘Depends’: previous to the use of namespaces, `depends’ was the only way to list another package as a dependency. Now use imports instead. This is because depends only loads and attaches the package whereas imports only loads it. This is because you do not want to change the search path of person who is using your package - this makes the package more ‘self-contained’ and minimises changes to the global environment.</p>
<p>Hadely recommends you to structure Imports with a new line between each pacakge and the packages listed in alphabetical order.</p>
<pre><code>imports:
      tidyverse,
       limma</code></pre>
</div>
<div id="suggests" class="section level3">
<h3><span class="header-section-number">14.6.2</span> Suggests</h3>
<p>Put packages here that your package can use but does not require. Packages placed here will not be automatically installed. Thus, you need to check if they are available before using.</p>
<p>Listing packages under Suggests is a courtesy to your users - so that you are not forcing them to download rarely needed packages. It also lets them get started with your package as quickly as possible.</p>
</div>
</div>
<div id="namespace" class="section level2">
<h2><span class="header-section-number">14.7</span> NAMESPACE</h2>
<p>This is not very important if you are developing packages for yourself but vital if you plan on submitting to CRAN.</p>
<p>It ensures that other packages won’t interfere with your code and that your code will not interfere with other packages. It does this with:</p>
<ul>
<li>Imports - the functions that you write will use other functions. Imports defines what functions will be used.</li>
<li>Exports - specifies what functions are available outside of your package. Helper functions etc should be made internal functions meaning that are only available within your package and another package cannot easily use them. Generally, you want to export a minimal set of functions to avoid conflicts.</li>
</ul>
<p>Namespaces help with looking up the value of an object associated with a name.</p>
<div id="search-paths" class="section level3">
<h3><span class="header-section-number">14.7.1</span> Search paths</h3>
<p>Adding a package to the search path means that you can use functions from it without specifying which package it comes from (e.g. <code>fun()</code> instead of <code>package::fun()</code>)</p>
<p>When you call a function, R looks for it in the global environment first, then in subsequent packages. When you run <code>search()</code>, it will show you where R will look for functions (in order).</p>
<p>Example output:</p>
<div class="figure">
<img src="Images/search-path.png" />

</div>
<p>Package loading and attaching:</p>
<ul>
<li>Loading - load code, data. Available in memory after loading. NOT in the search path so you cannot access its components without using <code>::</code>.
<ul>
<li>Confusingly, using <code>package::fun()</code> will automatically load a package if it is not already loaded.</li>
<li>It won’t however ‘attach’ a package to the search path, like <code>library()</code> does.</li>
</ul></li>
<li>Attaching - puts the package in the search path. You cannot attach a package without first loading it BUT you can load a package without attaching it.</li>
</ul>
<p>There are 4 ways to make a package available. Here they are divided into Load (ONLY loads) and Attach (loads and attaches):</p>
<div class="figure">
<img src="Images/package-avail.png" />

</div>
<p>Hadley recommends that you only use <code>library()</code> and <code>requireNamespace()</code> in specific circumstances.</p>
</div>
<div id="file-syntax" class="section level3">
<h3><span class="header-section-number">14.7.2</span> File syntax</h3>
<p>This file can be generated by roxygen2. You can specify which functions to export etc directly in the function .R script. There are a few reasons for this:</p>
<ul>
<li>You can tell in your code which functions are being exported.</li>
<li>Only have to use <span class="citation">@export</span> and you don’t have to worry about the specific directives.</li>
<li>Keeps the file tidy. You can import a package several times but it will only appear once in the the NAMESPACE file.</li>
</ul>
<p>It looks something like this:</p>
<pre><code># Generated by roxygen2 (4.0.2): do not edit by hand
S3method(as.character,expectation)
S3method(compare,character)
export(auto_test)
export(auto_test_package)
export(colourise)
export(context)
exportClasses(ListReporter)
exportClasses(MinimalReporter)
importFrom(methods,setRefClass)
useDynLib(testthat,duplicate_)
useDynLib(testthat,reassign_function)</code></pre>
<p>Each line contains a directive (e.g. <code>export()</code>, <code>import()</code>). There are 8 namespace directives:</p>
<ul>
<li><code>export()</code> - exports functions.</li>
<li><code>exportPattern()</code> - export all functions that match a (regular expression) pattern.</li>
<li><code>exportClasses()</code>, exportMethods - export S4 classes and methods.</li>
<li><p><code>S3method()</code> - export S3 methods.</p></li>
<li><code>import()</code> - import all functions from a package.</li>
<li><code>importFrom()</code> - import selected functions.</li>
<li><code>importClassesFrom()</code>, importMethodsFrom() - import S4 classes and methods.</li>
<li><p><code>useDynLib()</code> - import a function from C.</p></li>
</ul>
</div>
<div id="exporting-1" class="section level3">
<h3><span class="header-section-number">14.7.3</span> Exporting</h3>
<p>Add <code>#’ @export</code> above the function to make it usable outside of your package (not all functions like helper functions are usable ‘inside’ your function - meaning that you can ‘call’ on one function in your package within another function in your package).</p>
</div>
<div id="importing" class="section level3">
<h3><span class="header-section-number">14.7.4</span> Importing</h3>
<p>NAMESPACE controls which external functions can be used by your package without using <code>::</code>.</p>
<p>Note that ‘Imports’ in the DESCRIPTION file just makes sure a package is installed when yours it. It DOES NOT make functions available. This is the case whether or not the package was attached!</p>
<p>It is a convenience for the user - if your package is attached, it also attaches all the packages listed in Depends. This means that when a user loads and attaches your package, they can also use all the functions in Depends without using <code>::</code>.</p>
<p>Hadley recommends for you to list all the require packages in Imports (so that it is installed) but do not import these functions because it is better to refer to it explicitly using package <code>::fun()</code> - this is to make your code easier to read.</p>
<p>To import a function using roxygen2, use: <code>@importFrom package fun</code>. Hadley says it is okay to do this if you are using a function repeatedly, as there is a 5s increase in function evaluation time if you use <code>::</code>.</p>
</div>
<div id="exporting-2" class="section level3">
<h3><span class="header-section-number">14.7.5</span> Exporting</h3>
<p>Add <code>#’ @export</code> above the function to make it usable outside of your package (not all functions like helper functions are usable ‘inside’ your function - meaning that you can ‘call’ on one function in your package within another function in your package).</p>
</div>
</div>
<div id="documentation" class="section level2">
<h2><span class="header-section-number">14.8</span> Documentation</h2>
<p>Great guide <a href="http://kbroman.org/pkg_primer/pages/docs.html">here</a> by K Broman.</p>
<p>Documentation can be for your function (or your dataset or class). It is accessed by <code>?</code> or <code>help()</code>.</p>
<p>Documentation should be in a folder called ‘man’ and should be of .Rd format. .Rd is loosely based on LaTeX and are rendered to HTML, plain text and pdf for viewing.</p>
<div id="roxygen2" class="section level3">
<h3><span class="header-section-number">14.8.1</span> Roxygen2</h3>
<p>Roxygen2 is a package that helps you write these documentation files IN your script by turning specially formatted comments into .Rd files. As stated at the top of the roxygen generated .Rd files, you should not edit the .Rd file by hand.</p>
<div id="basics-2" class="section level4">
<h4><span class="header-section-number">14.8.1.1</span> Basics</h4>
<p>Roxygen comments start with <code>#’</code>. All the roxygen comments before a function is called a ‘block’. Each line should be wrapped like your code (at 80 characters).</p>
<p>Tags - tags break up blocks and are specified using <code>@tagName</code>. <code>@</code> needs to be escaped if you want to add a literal ‘@’.</p>
<p>Sections - you can add arbitrary sections using the <code>@section</code> tag. Useful for breaking a long details section into several chunks. Section titles: Sentence case, followed by colon, 1 line long.</p>
</div>
<div id="layout" class="section level4">
<h4><span class="header-section-number">14.8.1.2</span> Layout</h4>
<ul>
<li>Title - First sentence becomes the title of the documentation.
<ul>
<li>Sentence case. Do NOT end with full stop.</li>
<li>Required</li>
</ul></li>
<li>Description - Second paragraph. Briefly describe what the function does.
<ul>
<li>Required.</li>
</ul></li>
<li>Details - Third and subsequent paragraph(s).
<ul>
<li>Go into detail about how a function works.</li>
<li>Shown after the argument descriptions.</li>
<li>Optional.</li>
</ul></li>
</ul>
</div>
<div id="tags" class="section level4">
<h4><span class="header-section-number">14.8.1.3</span> Tags</h4>
<ul>
<li><code>@param</code> - details of function parameters.
<ul>
<li>syntax: <code>@param name description</code>.</li>
<li>Specify type of input (string, vector..etc) and what it does.</li>
<li>Description should be sentence case and end with a full stop.</li>
<li>Document several parameters by separating their parameter names with comma (no space) in ‘name’.</li>
</ul></li>
<li><code>@examples</code> - Executable R code showing how to use the function in practice.
<ul>
<li>To show error, use <code>\dontrun{}</code>.</li>
<li>You can also have examples in separate files and give a path to them, and use this syntax - <code>@example path/rel/to/package/root</code></li>
<li>Note lack of ‘s’ at end of example here.</li>
</ul></li>
<li><code>@return</code> - Describes the output from the function.</li>
<li><code>@seealso</code> - Point to other useful resources, e.g webpages or another function in your package.</li>
<li><code>@family</code> - Family of related functions, where every function should link to every other function in the family. E.g.:</li>
</ul>
<pre><code>#&#39; @family aggregate functions
#&#39; @seealso \code{\link{prod}} for products, \code{\link{cumsum}} for cumulative
#&#39;   sums, and \code{\link{colSums}}/\code{\link{rowSums}} marginal sums over
#&#39;   high-dimensional arrays.</code></pre>
<ul>
<li><code>@aliases</code> - Any other alias(es) that should direct the user to this help file.</li>
<li><code>@keywords</code> - Adds standardise keywords. These are optional but there is 1 that may be useful.
<ul>
<li><code>@keywords internal</code> - can be added to internal package functions. This removes it from the (associated .Rd file) from the package index (meaning a user can not easily access it) and disables some of its automated tests.</li>
</ul></li>
</ul>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; Sum of vector elements.</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; \code{sum} returns the sum of all the values present in its arguments.</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; This is a generic function: methods can be defined for it directly</span>
<span class="co">#&#39; or via the \code{\link{Summary}} group generic. For this to work </span>
<span class="co">#&#39; properly, the arguments \code{...} should be unnamed, and dispatch is on #&#39; the first argument.</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @param ... Numeric, complex, or logical vectors.</span>
<span class="co">#&#39; @param na.rm A logical scalar. Should missing values (including NaN)</span>
<span class="co">#&#39;   be removed?</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @return If all inputs are integer and logical, then the output</span>
<span class="co">#&#39;   will be an integer. If integer overflow</span>
<span class="co">#&#39;   \url{http://en.wikipedia.org/wiki/Integer_overflow} occurs, the output</span>
<span class="co">#&#39;   will be NA with a warning. Otherwise it will be a length-one numeric or</span>
<span class="co">#&#39;   complex vector.</span>
<span class="co">#&#39;</span>
<span class="co">#&#39;   Zero-length vectors have sum 0 by definition. See</span>
<span class="co">#&#39;   \url{http://en.wikipedia.org/wiki/Empty_sum} for more details.</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @examples</span>
<span class="co">#&#39; sum(1:10)</span>
<span class="co">#&#39; sum(1:5, 6:10)</span>
<span class="co">#&#39; sum(F, F, F, T, T)</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; \dontrun{</span>
<span class="co">#&#39; sum(&quot;a&quot;)</span>
<span class="co">#&#39; }</span>
<span class="co">#&#39; @export</span>
sum &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) {}</code></pre></div>
</div>
<div id="formatting" class="section level4">
<h4><span class="header-section-number">14.8.1.4</span> Formatting</h4>
<p>Special characters:</p>
<ul>
<li><code>@</code> - marks start of tag. <code>@@</code> to insert literal ‘@’.</li>
<li><code>%</code> - marks start of a latex comment. <code>\%</code> to insert literal ‘%’.</li>
<li><code>\</code> - marks start of latex escaping. Use <code>\\</code> to insert literal ’'.</li>
</ul>
<p>To manually insert a new line use <code>\cr</code> (See <a href="https://stackoverflow.com/questions/18835365/roxygen2-manually-insert-line-breaks">this</a> SO question for more.)</p>
<ul>
<li><code>\emph{}</code> - Italics.</li>
<li><code>\strong{}</code> - Bold.</li>
<li><code>\code{}</code> - Inline code.</li>
<li><code>\preformatted{}</code> - Format as-is. Can be used for multi-line code.</li>
</ul>
<p>Links</p>
<ul>
<li><code>\code{\link{function}}</code> - Link to function in this package.</li>
<li><code>\code{\link[package]{function}}</code> - Link to function in another package.</li>
<li><code>\link[=dest]{name}</code> - Link to ‘dest’, but show/display ‘name’ in documentation output.</li>
<li><code>\code{\link[MASS:abbey]{name}}</code> - Link to function in another package, but show name.</li>
<li><code>\url{http://rstudio.com}</code> - url.</li>
<li><code>\href{http://rstudio.com}{Rstudio}</code> - a url with custom link text.</li>
</ul>
<p>Lists</p>
<p>Numbered:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; \enumerate{</span>
<span class="co">#&#39;     \item</span>
<span class="co">#&#39;      \item</span>
<span class="co">#&#39; }</span></code></pre></div>
<p>Bullet:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; \itemize{</span>
<span class="co">#&#39;     \item</span>
<span class="co">#&#39;      \item</span>
<span class="co">#&#39; }</span></code></pre></div>
<p>Named:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; \describe{</span>
<span class="co">#&#39;     \item{name}{blah blah}</span>
<span class="co">#&#39;      \item{name}{blah blah}</span>
<span class="co">#&#39; }</span></code></pre></div>
</div>
<div id="multiple-functions" class="section level4">
<h4><span class="header-section-number">14.8.1.5</span> Multiple functions</h4>
<p>There are times where you may want to have greater than one function per .R script:</p>
<ul>
<li>Helper functions - often these use ‘linux’ naming convention where the name of the function starts with a ‘.’ Do not export this function.</li>
<li>Similar functions, especially if they have the same parameters.</li>
</ul>
<p>This can be done with <code>@describeIn</code> or <code>@rdname</code>.</p>
<p><code>@describeIn</code> -</p>
<ul>
<li>Good for documenting functions with the same/similar arguments.</li>
<li>Generates a new section named ‘Functions’ (or Methods (by class) if you are documenting a method) .
<ul>
<li>This generates a bulleted list describing each function. This is at the end under ‘Details’.</li>
<li>The document itself is named the first function, the other functions are documented in the same file.</li>
</ul></li>
</ul>
<p>For ALL functions (including the first/main one), use <code>@describeIn &lt;name of 1st fun&gt; &lt;description&gt;</code> above the <code>#' @export</code> of that function. This will give you a bullet point list of all your functions and their individual descriptions.</p>
<p><code>@rdname</code></p>
<p>Overrides the default file name generated by roxygen2 and merges documentation for several objects into one file.</p>
<p>Can look something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; @rdname fun1    # you want this function to be documented with fun1</span>
<span class="co">#&#39; @export</span>
fun2            <span class="co"># export your 2nd function as usual</span></code></pre></div>
<p>This generates a file named the first function (as above) and your other functions are documented in the same file.</p>
<p>Or you can create a dummy documentation file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; Basic arithmetic</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @param x,y numeric vectors.</span>
<span class="co">#&#39; @name arith        # dummy file - this will be title of the help file</span>
<span class="ot">NULL</span>
## NULL
<span class="co">#&#39; @rdname arith        # your function will be documented under the title of your dummy file</span>
add &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) x <span class="op">+</span><span class="st"> </span>y

<span class="co">#&#39; @rdname arith        # same with your second function</span>
times &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) x <span class="op">*</span><span class="st"> </span>y</code></pre></div>
<p>Here your document is named ‘arith’ and your functions are documented in this document. Notice here that the document name is NOT the same as either of your functions.</p>
<p>See the roxygen2 <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html">vignette</a> and <a href="https://stackoverflow.com/questions/15932585/multiple-functions-in-one-rd-file">this</a> SO question for more.</p>
</div>
<div id="helper-functions" class="section level4">
<h4><span class="header-section-number">14.8.1.6</span> Helper functions</h4>
<p>In a package, you do NOT need to write a helper function above the main functions (which calls the helper function). All the functions are made available.</p>
<p>This is of note as roxygen2 will generate a .Rd file for the FIRST function (even if it is marked as internal) and NOT for your subsequent main function.</p>
<p>Remember to add <code>#’ @keywords internal</code> above the helper function so users cannot easily use it.</p>
<p>See <a href="https://stackoverflow.com/questions/5249673/how-should-i-handle-helper-functions-in-an-r-package">this</a> SO question for more on how to handle helper functions.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rmarkdown.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/13-package.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["R notes.pdf", "R notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
