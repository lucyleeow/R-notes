<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 5 String manipulation | R notes</title>
  <meta name="description" content="Guide to R.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 5 String manipulation | R notes />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Guide to R." />
  <meta name="github-repo" content="lucyleeow/R_notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 String manipulation | R notes />
  
  <meta name="twitter:description" content="Guide to R." />
  

<meta name="author" content="Lucy Liu">


<meta name="date" content="2018-12-26">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-wrangling-tidyverse.html">
<link rel="next" href="control-flow.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#r-files"><i class="fa fa-check"></i><b>2.1</b> R files</a><ul>
<li class="chapter" data-level="2.1.1" data-path="introduction.html"><a href="introduction.html#memory"><i class="fa fa-check"></i><b>2.1.1</b> Memory</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction.html"><a href="introduction.html#r-project"><i class="fa fa-check"></i><b>2.1.2</b> R project</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#packages"><i class="fa fa-check"></i><b>2.2</b> Packages</a><ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#library"><i class="fa fa-check"></i><b>2.2.1</b> Library</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction.html"><a href="introduction.html#bioconductor"><i class="fa fa-check"></i><b>2.2.2</b> Bioconductor</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#basics"><i class="fa fa-check"></i><b>2.3</b> Basics</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#arithmetic"><i class="fa fa-check"></i><b>2.3.1</b> Arithmetic</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#help"><i class="fa fa-check"></i><b>2.4</b> Help</a></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#data-types"><i class="fa fa-check"></i><b>2.5</b> Data types</a><ul>
<li class="chapter" data-level="2.5.1" data-path="introduction.html"><a href="introduction.html#numeric"><i class="fa fa-check"></i><b>2.5.1</b> Numeric</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction.html"><a href="introduction.html#coercion"><i class="fa fa-check"></i><b>2.5.2</b> Coercion</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction.html"><a href="introduction.html#factors"><i class="fa fa-check"></i><b>2.5.3</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#data-structures"><i class="fa fa-check"></i><b>2.6</b> Data structures</a><ul>
<li class="chapter" data-level="2.6.1" data-path="introduction.html"><a href="introduction.html#atomic-vector"><i class="fa fa-check"></i><b>2.6.1</b> Atomic vector</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction.html"><a href="introduction.html#lists"><i class="fa fa-check"></i><b>2.6.2</b> Lists</a></li>
<li class="chapter" data-level="2.6.3" data-path="introduction.html"><a href="introduction.html#matrix"><i class="fa fa-check"></i><b>2.6.3</b> Matrix</a></li>
<li class="chapter" data-level="2.6.4" data-path="introduction.html"><a href="introduction.html#array"><i class="fa fa-check"></i><b>2.6.4</b> Array</a></li>
<li class="chapter" data-level="2.6.5" data-path="introduction.html"><a href="introduction.html#dataframes"><i class="fa fa-check"></i><b>2.6.5</b> Dataframes</a></li>
<li class="chapter" data-level="2.6.6" data-path="introduction.html"><a href="introduction.html#high-dimension-structures"><i class="fa fa-check"></i><b>2.6.6</b> High dimension structures</a></li>
<li class="chapter" data-level="2.6.7" data-path="introduction.html"><a href="introduction.html#attributes"><i class="fa fa-check"></i><b>2.6.7</b> Attributes</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#nas"><i class="fa fa-check"></i><b>2.7</b> NAs</a></li>
<li class="chapter" data-level="2.8" data-path="introduction.html"><a href="introduction.html#importing-exporting"><i class="fa fa-check"></i><b>2.8</b> Importing &amp; exporting</a></li>
<li class="chapter" data-level="2.9" data-path="introduction.html"><a href="introduction.html#saving-objects"><i class="fa fa-check"></i><b>2.9</b> Saving objects</a><ul>
<li class="chapter" data-level="2.9.1" data-path="introduction.html"><a href="introduction.html#feather"><i class="fa fa-check"></i><b>2.9.1</b> feather</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html"><i class="fa fa-check"></i><b>3</b> Data wrangling - base R</a><ul>
<li class="chapter" data-level="3.1" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#useful-functions"><i class="fa fa-check"></i><b>3.1</b> Useful functions</a></li>
<li class="chapter" data-level="3.2" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#subsetting"><i class="fa fa-check"></i><b>3.2</b> Subsetting</a></li>
<li class="chapter" data-level="3.3" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#apply-family"><i class="fa fa-check"></i><b>3.3</b> Apply family</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#uses"><i class="fa fa-check"></i><b>3.3.1</b> Uses</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#docall"><i class="fa fa-check"></i><b>3.4</b> do.call()</a></li>
<li class="chapter" data-level="3.5" data-path="data-wrangling-base-r.html"><a href="data-wrangling-base-r.html#do.call-vs-lapply-vs-map"><i class="fa fa-check"></i><b>3.5</b> do.call vs lapply vs map</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html"><i class="fa fa-check"></i><b>4</b> Data wrangling - tidyverse</a><ul>
<li class="chapter" data-level="4.1" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#tibbles"><i class="fa fa-check"></i><b>4.1</b> Tibbles</a></li>
<li class="chapter" data-level="4.2" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#readr"><i class="fa fa-check"></i><b>4.2</b> readr</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#parsing"><i class="fa fa-check"></i><b>4.2.1</b> Parsing</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#exporting"><i class="fa fa-check"></i><b>4.2.2</b> Exporting</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#dplyr"><i class="fa fa-check"></i><b>4.3</b> dplyr</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#subsetting-1"><i class="fa fa-check"></i><b>4.3.1</b> Subsetting</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#the-pipe"><i class="fa fa-check"></i><b>4.3.2</b> The pipe %&gt;%</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#filter"><i class="fa fa-check"></i><b>4.3.3</b> filter</a></li>
<li class="chapter" data-level="4.3.4" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#select"><i class="fa fa-check"></i><b>4.3.4</b> select</a></li>
<li class="chapter" data-level="4.3.5" data-path="data-wrangling-tidyverse.html"><a href="data-wrangling-tidyverse.html#mutate"><i class="fa fa-check"></i><b>4.3.5</b> mutate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="string-manipulation.html"><a href="string-manipulation.html"><i class="fa fa-check"></i><b>5</b> String manipulation</a><ul>
<li class="chapter" data-level="5.1" data-path="string-manipulation.html"><a href="string-manipulation.html#grep-family"><i class="fa fa-check"></i><b>5.1</b> Grep family</a><ul>
<li class="chapter" data-level="5.1.1" data-path="string-manipulation.html"><a href="string-manipulation.html#locating-pattern-within-string"><i class="fa fa-check"></i><b>5.1.1</b> Locating pattern within string</a></li>
<li class="chapter" data-level="5.1.2" data-path="string-manipulation.html"><a href="string-manipulation.html#replacments"><i class="fa fa-check"></i><b>5.1.2</b> Replacments</a></li>
<li class="chapter" data-level="5.1.3" data-path="string-manipulation.html"><a href="string-manipulation.html#backreferences"><i class="fa fa-check"></i><b>5.1.3</b> Backreferences</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="string-manipulation.html"><a href="string-manipulation.html#regular-expressions"><i class="fa fa-check"></i><b>5.2</b> Regular expressions</a><ul>
<li class="chapter" data-level="5.2.1" data-path="string-manipulation.html"><a href="string-manipulation.html#quantifiers"><i class="fa fa-check"></i><b>5.2.1</b> Quantifiers</a></li>
<li class="chapter" data-level="5.2.2" data-path="string-manipulation.html"><a href="string-manipulation.html#position"><i class="fa fa-check"></i><b>5.2.2</b> Position</a></li>
<li class="chapter" data-level="5.2.3" data-path="string-manipulation.html"><a href="string-manipulation.html#operators"><i class="fa fa-check"></i><b>5.2.3</b> Operators</a></li>
<li class="chapter" data-level="5.2.4" data-path="string-manipulation.html"><a href="string-manipulation.html#character-classes"><i class="fa fa-check"></i><b>5.2.4</b> Character classes</a></li>
<li class="chapter" data-level="5.2.5" data-path="string-manipulation.html"><a href="string-manipulation.html#examples"><i class="fa fa-check"></i><b>5.2.5</b> Examples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>6</b> Control flow</a><ul>
<li class="chapter" data-level="6.1" data-path="control-flow.html"><a href="control-flow.html#for-loops"><i class="fa fa-check"></i><b>6.1</b> For loops</a><ul>
<li class="chapter" data-level="6.1.1" data-path="control-flow.html"><a href="control-flow.html#creating-empty-data-structures"><i class="fa fa-check"></i><b>6.1.1</b> Creating empty data structures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>7</b> Functions</a><ul>
<li class="chapter" data-level="7.1" data-path="functions.html"><a href="functions.html#source-code"><i class="fa fa-check"></i><b>7.1</b> Source code</a></li>
<li class="chapter" data-level="7.2" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>7.2</b> Writing functions</a><ul>
<li class="chapter" data-level="7.2.1" data-path="functions.html"><a href="functions.html#evaluation"><i class="fa fa-check"></i><b>7.2.1</b> Evaluation</a></li>
<li class="chapter" data-level="7.2.2" data-path="functions.html"><a href="functions.html#checking-inputs"><i class="fa fa-check"></i><b>7.2.2</b> Checking inputs</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="functions.html"><a href="functions.html#messages"><i class="fa fa-check"></i><b>7.3</b> Messages</a><ul>
<li class="chapter" data-level="7.3.1" data-path="functions.html"><a href="functions.html#optional-arguments"><i class="fa fa-check"></i><b>7.3.1</b> Optional arguments</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="functions.html"><a href="functions.html#functions-with-dplyr"><i class="fa fa-check"></i><b>7.4</b> Functions with dplyr</a><ul>
<li class="chapter" data-level="7.4.1" data-path="functions.html"><a href="functions.html#non-standard-evaluation"><i class="fa fa-check"></i><b>7.4.1</b> Non standard evaluation</a></li>
<li class="chapter" data-level="7.4.2" data-path="functions.html"><a href="functions.html#writing-dplyr-functions"><i class="fa fa-check"></i><b>7.4.2</b> Writing dplyr functions</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="functions.html"><a href="functions.html#ggplot"><i class="fa fa-check"></i><b>7.5</b> ggplot</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="base-r.html"><a href="base-r.html"><i class="fa fa-check"></i><b>8</b> Base R</a><ul>
<li class="chapter" data-level="8.1" data-path="base-r.html"><a href="base-r.html#palette"><i class="fa fa-check"></i><b>8.1</b> Palette</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>9</b> ggplot2</a><ul>
<li class="chapter" data-level="9.1" data-path="ggplot2.html"><a href="ggplot2.html#introduction-1"><i class="fa fa-check"></i><b>9.1</b> Introduction</a><ul>
<li class="chapter" data-level="9.1.1" data-path="ggplot2.html"><a href="ggplot2.html#geoms"><i class="fa fa-check"></i><b>9.1.1</b> geoms</a></li>
<li class="chapter" data-level="9.1.2" data-path="ggplot2.html"><a href="ggplot2.html#layering"><i class="fa fa-check"></i><b>9.1.2</b> Layering</a></li>
<li class="chapter" data-level="9.1.3" data-path="ggplot2.html"><a href="ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>9.1.3</b> Aesthetics</a></li>
<li class="chapter" data-level="9.1.4" data-path="ggplot2.html"><a href="ggplot2.html#syntax"><i class="fa fa-check"></i><b>9.1.4</b> Syntax</a></li>
<li class="chapter" data-level="9.1.5" data-path="ggplot2.html"><a href="ggplot2.html#stat"><i class="fa fa-check"></i><b>9.1.5</b> Stat</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ggplot2.html"><a href="ggplot2.html#geom_point"><i class="fa fa-check"></i><b>9.2</b> geom_point</a><ul>
<li class="chapter" data-level="9.2.1" data-path="ggplot2.html"><a href="ggplot2.html#jitter"><i class="fa fa-check"></i><b>9.2.1</b> Jitter</a></li>
<li class="chapter" data-level="9.2.2" data-path="ggplot2.html"><a href="ggplot2.html#labels"><i class="fa fa-check"></i><b>9.2.2</b> Labels</a></li>
<li class="chapter" data-level="9.2.3" data-path="ggplot2.html"><a href="ggplot2.html#colour-points"><i class="fa fa-check"></i><b>9.2.3</b> Colour points</a></li>
<li class="chapter" data-level="9.2.4" data-path="ggplot2.html"><a href="ggplot2.html#matrix-of-plots"><i class="fa fa-check"></i><b>9.2.4</b> Matrix of plots</a></li>
<li class="chapter" data-level="9.2.5" data-path="ggplot2.html"><a href="ggplot2.html#adding-lines"><i class="fa fa-check"></i><b>9.2.5</b> Adding lines</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="ggplot2.html"><a href="ggplot2.html#bar-graphs-histograms"><i class="fa fa-check"></i><b>9.3</b> Bar graphs &amp; histograms</a></li>
<li class="chapter" data-level="9.4" data-path="ggplot2.html"><a href="ggplot2.html#geom_boxplot"><i class="fa fa-check"></i><b>9.4</b> geom_boxplot</a></li>
<li class="chapter" data-level="9.5" data-path="ggplot2.html"><a href="ggplot2.html#facets"><i class="fa fa-check"></i><b>9.5</b> Facets</a></li>
<li class="chapter" data-level="9.6" data-path="ggplot2.html"><a href="ggplot2.html#reordering-factors"><i class="fa fa-check"></i><b>9.6</b> Reordering factors</a></li>
<li class="chapter" data-level="9.7" data-path="ggplot2.html"><a href="ggplot2.html#coordinate-systems"><i class="fa fa-check"></i><b>9.7</b> Coordinate systems</a></li>
<li class="chapter" data-level="9.8" data-path="ggplot2.html"><a href="ggplot2.html#reference-lines"><i class="fa fa-check"></i><b>9.8</b> Reference lines</a></li>
<li class="chapter" data-level="9.9" data-path="ggplot2.html"><a href="ggplot2.html#error-bars"><i class="fa fa-check"></i><b>9.9</b> Error bars</a></li>
<li class="chapter" data-level="9.10" data-path="ggplot2.html"><a href="ggplot2.html#appearance"><i class="fa fa-check"></i><b>9.10</b> Appearance</a></li>
<li class="chapter" data-level="9.11" data-path="ggplot2.html"><a href="ggplot2.html#dplyr-ggplot2"><i class="fa fa-check"></i><b>9.11</b> dplyr &amp; ggplot2</a></li>
<li class="chapter" data-level="9.12" data-path="ggplot2.html"><a href="ggplot2.html#saving-graphs"><i class="fa fa-check"></i><b>9.12</b> Saving graphs</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="other-visualisation-packages.html"><a href="other-visualisation-packages.html"><i class="fa fa-check"></i><b>10</b> Other visualisation packages</a><ul>
<li class="chapter" data-level="10.1" data-path="other-visualisation-packages.html"><a href="other-visualisation-packages.html#pheatmap"><i class="fa fa-check"></i><b>10.1</b> pheatmap</a></li>
<li class="chapter" data-level="10.2" data-path="other-visualisation-packages.html"><a href="other-visualisation-packages.html#venndiagram"><i class="fa fa-check"></i><b>10.2</b> VennDiagram</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-table.html"><a href="data-table.html"><i class="fa fa-check"></i><b>11</b> data.table</a></li>
<li class="chapter" data-level="12" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>12</b> Rmarkdown</a></li>
<li class="chapter" data-level="13" data-path="package-development.html"><a href="package-development.html"><i class="fa fa-check"></i><b>13</b> Package development</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="string-manipulation" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> String manipulation</h1>
<p>Useful references:</p>
<ul>
<li><a href="http://www.gastonsanchez.com/Handling_and_Processing_Strings_in_R.pdf">Handling and processing strings in R</a></li>
<li>Paul Murrell’s <a href="https://www.stat.auckland.ac.nz/~paul/ItDT/HTML/node82.html">notes</a></li>
<li><a href="https://www.stat.auckland.ac.nz/~paul/ItDT/HTML/node82.html">Regular expressions in R</a> - several examples were taken from here.</li>
<li><a href="https://www.regular-expressions.info/rlanguage.html">Regular expression info</a></li>
</ul>
<div id="grep-family" class="section level2">
<h2><span class="header-section-number">5.1</span> Grep family</h2>
<ul>
<li><code>grep()</code> - gives you each element in the vector that matches your pattern. <code>value=FALSE</code> returns indices of matches, <code>value=TRUE</code> returns the the matches. <code>invert</code> argument allows you to return everything but the matches.</li>
<li><code>grepl()</code> - returns a logical vector telling you which elements in your vector matches your pattern.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">strings &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;ab&quot;</span>, <span class="st">&quot;acb&quot;</span>, <span class="st">&quot;accb&quot;</span>, <span class="st">&quot;acccb&quot;</span>, <span class="st">&quot;accccb&quot;</span>)
<span class="kw">grep</span>(<span class="st">&quot;ac&quot;</span>, strings, <span class="dt">value =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] &quot;acb&quot;    &quot;accb&quot;   &quot;acccb&quot;  &quot;accccb&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grepl</span>(<span class="st">&quot;ac&quot;</span>, strings)</code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div id="locating-pattern-within-string" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Locating pattern within string</h3>
<p>Each element searched separately. Information sufficient to extract the pattern is returned:</p>
<ol style="list-style-type: decimal">
<li>An integer vector indicating the character position in each element, where either the first, or all regex match was found.</li>
<li>Each element also has a <code>match.length</code> attribute, which gives the length of the match.</li>
</ol>
<p>If pattern is not found -1 is returned.</p>
<ul>
<li><code>regexpr()</code> - returns vector, giving the first match found for each element in input vector. Syntax: <code>regexpr(pattern, text, ignore.case=FALSE)</code>. <code>text</code> is the character vector, where each element searched separately.</li>
<li><code>gregexpr()</code> - returns list, giving all matches found for each element in input vector.</li>
</ul>
<p>We can look for the pattern ‘cc’ in <code>strings</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw">regexpr</span>(<span class="st">&#39;cc&#39;</span>, strings))</code></pre></div>
<pre><code>##  int [1:6] -1 -1 -1 2 2 2
##  - attr(*, &quot;match.length&quot;)= int [1:6] -1 -1 -1 2 2 2
##  - attr(*, &quot;index.type&quot;)= chr &quot;chars&quot;
##  - attr(*, &quot;useBytes&quot;)= logi TRUE</code></pre>
<p>The output is a vector of the same length as <code>strings</code>. Each element in the vector is the first index within each string in <code>strings</code> that matched the pattern. Each elemetn also has a <code>match.length</code> attribute which gives the length of the match. As the pattern was two characters in length, all the <code>match.length</code>s are ‘2’.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw">gregexpr</span>(<span class="st">&#39;cc&#39;</span>, strings))</code></pre></div>
<pre><code>## List of 6
##  $ : int -1
##   ..- attr(*, &quot;match.length&quot;)= int -1
##   ..- attr(*, &quot;index.type&quot;)= chr &quot;chars&quot;
##   ..- attr(*, &quot;useBytes&quot;)= logi TRUE
##  $ : int -1
##   ..- attr(*, &quot;match.length&quot;)= int -1
##   ..- attr(*, &quot;index.type&quot;)= chr &quot;chars&quot;
##   ..- attr(*, &quot;useBytes&quot;)= logi TRUE
##  $ : int -1
##   ..- attr(*, &quot;match.length&quot;)= int -1
##   ..- attr(*, &quot;index.type&quot;)= chr &quot;chars&quot;
##   ..- attr(*, &quot;useBytes&quot;)= logi TRUE
##  $ : int 2
##   ..- attr(*, &quot;match.length&quot;)= int 2
##   ..- attr(*, &quot;index.type&quot;)= chr &quot;chars&quot;
##   ..- attr(*, &quot;useBytes&quot;)= logi TRUE
##  $ : int 2
##   ..- attr(*, &quot;match.length&quot;)= int 2
##   ..- attr(*, &quot;index.type&quot;)= chr &quot;chars&quot;
##   ..- attr(*, &quot;useBytes&quot;)= logi TRUE
##  $ : int [1:2] 2 4
##   ..- attr(*, &quot;match.length&quot;)= int [1:2] 2 2
##   ..- attr(*, &quot;index.type&quot;)= chr &quot;chars&quot;
##   ..- attr(*, &quot;useBytes&quot;)= logi TRUE</code></pre>
<p><code>gregexpr()</code> gives you ALL the matches. The output is thus a list as the number of matches can vary for each element in the text (<code>strings</code> here). Again ‘-1’ indicates taht there were no matches. The one difference is that in the last element ‘accccb’, the pattern ‘cc’ matches twice - once at index 2 and once at index 4.</p>
<p>You can also change the pattern from an ‘exact match’ to a regular expression. Here we are looking for the pattern ‘cc’ ‘at least once’ - instead of the exact pattern ‘cc’.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw">regexpr</span>(<span class="st">&#39;cc+&#39;</span>, strings))</code></pre></div>
<pre><code>##  int [1:6] -1 -1 -1 2 2 2
##  - attr(*, &quot;match.length&quot;)= int [1:6] -1 -1 -1 2 3 4
##  - attr(*, &quot;index.type&quot;)= chr &quot;chars&quot;
##  - attr(*, &quot;useBytes&quot;)= logi TRUE</code></pre>
<p>Adding the <code>+</code> to the pattern says that we are looking for ‘cc’ to occur at least once. The result of this change is that <code>match.length</code> now gives the full length of c’s in each element (as long as it is longer than twoº.</p>
<p>To get the actual substrings matched by the pattern, use <code>regmatches()</code> after the above functions.</p>
<p>If you pass the output from <code>regexpr()</code> to <code>regmatches()</code>, a character vector is with all the strings that matched is returned. This vector is shorter than the input vector if no match was found in some of the elements. <code>regmatches()</code> takes two arguments, the vector of strings the pattern was searched for in and the output from a regex.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">regmatches</span>(strings, <span class="kw">regexpr</span>(<span class="st">&#39;cc&#39;</span>, strings))</code></pre></div>
<pre><code>## [1] &quot;cc&quot; &quot;cc&quot; &quot;cc&quot;</code></pre>
<p>If you pass the output from <code>gregexpr()</code> to <code>regmatches()</code> a list the same length as the input vector will be output. Each element is a character vector with all the matches of the corresponding element in the input vector, or ‘character(0)’ if an element had no matches.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">regmatches</span>(strings, <span class="kw">gregexpr</span>(<span class="st">&#39;cc&#39;</span>, strings))</code></pre></div>
<pre><code>## [[1]]
## character(0)
## 
## [[2]]
## character(0)
## 
## [[3]]
## character(0)
## 
## [[4]]
## [1] &quot;cc&quot;
## 
## [[5]]
## [1] &quot;cc&quot;
## 
## [[6]]
## [1] &quot;cc&quot; &quot;cc&quot;</code></pre>
</div>
<div id="replacments" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Replacments</h3>
<p>A very powerful way of making replacements in a string is to assign a new list to the <code>regmatches()</code> function when you call it on the output of <code>gregexpr()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;def&quot;</span>, <span class="st">&quot;cba a&quot;</span>, <span class="st">&quot;aa&quot;</span>)
m &lt;-<span class="st"> </span><span class="kw">gregexpr</span>(<span class="st">&quot;a+&quot;</span>, x)
<span class="kw">regmatches</span>(x, m)</code></pre></div>
<pre><code>## [[1]]
## [1] &quot;a&quot;
## 
## [[2]]
## character(0)
## 
## [[3]]
## [1] &quot;a&quot; &quot;a&quot;
## 
## [[4]]
## [1] &quot;aa&quot;</code></pre>
<p>First, notice how in the third element of <code>x</code>, ‘a+’ matched twice, which in the fourth element, it matched only once. This is because we are looking for at least one ‘a’ but there was a space between the two a’s in the third element.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;one&quot;</span>), <span class="kw">character</span>(<span class="dv">0</span>), <span class="kw">c</span>(<span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;four&quot;</span>))</code></pre></div>
<pre><code>## [[1]]
## [1] &quot;one&quot;
## 
## [[2]]
## character(0)
## 
## [[3]]
## [1] &quot;two&quot;   &quot;three&quot;
## 
## [[4]]
## [1] &quot;four&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">regmatches</span>(x, m)  &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;one&quot;</span>), <span class="kw">character</span>(<span class="dv">0</span>), <span class="kw">c</span>(<span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;four&quot;</span>))
x</code></pre></div>
<pre><code>## [1] &quot;onebc&quot;       &quot;def&quot;         &quot;cbtwo three&quot; &quot;four&quot;</code></pre>
<p>All the matches were replaced by the words in the list.</p>
<p>The list you assign should have as many elements as the original input vector. Each element should be a character vector of the same length as the number of matches in that element. The original input vector is then modified to have all the regex matches replaced with the text from the new vector.</p>
<p>This can also be done using these two functions:</p>
<ul>
<li><code>sub()</code> - replace first occurrence.</li>
<li><code>gsub()</code> - replace all occurrences.</li>
</ul>
<p>You can match and replace an exact phrase:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">string &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;122 trfr (2.3%) fdfd&quot;</span>, <span class="st">&quot;122 trfr (2.3%) fdfd&quot;</span>)
<span class="kw">sub</span>(<span class="st">&#39;122&#39;</span>, <span class="st">&quot;**&quot;</span> , string)</code></pre></div>
<pre><code>## [1] &quot;** trfr (2.3%) fdfd&quot; &quot;** trfr (2.3%) fdfd&quot;</code></pre>
<p>Or you can use a a regular expression (<code>\\d</code> means any number):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sub</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">d&#39;</span>, <span class="st">&quot;**&quot;</span> , string)</code></pre></div>
<pre><code>## [1] &quot;**22 trfr (2.3%) fdfd&quot; &quot;**22 trfr (2.3%) fdfd&quot;</code></pre>
</div>
<div id="backreferences" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Backreferences</h3>
<p>You can use backreferences to reinsert text matched by capturing a group. Bascially you can retrieve the bits that matched various parts of your regular expression to alter them or use them for building up a new string.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">string &lt;-<span class="st"> &quot;The cat sat on the mat.&quot;</span>
<span class="kw">gsub</span>(<span class="st">&quot;(.)at&quot;</span>, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">1ot&quot;</span>, string)</code></pre></div>
<pre><code>## [1] &quot;The cot sot on the mot.&quot;</code></pre>
<p><code>\\1</code> is referring to the first match of the pattern “(.)at” (which is any three-letter word ending with ‘at’). Thus three-letter word ending in ‘at’ is replaced by a three-letter word with the original starting letter but ending in ‘ot’.</p>
<p>You can only refer to backreference \1 to \9 (i.e. the first to ninth match). If you wish to return entire match, place entire regex in a capturing group and use \1.</p>
<p>If you are using capturing group, your regex needs to consider the entire string, and use <code>()</code> to specify which ones you are interested in. The <code>(...)</code> allows for grouping in regular expressions so you can retrieve the bits that matched various parts of your regular expression so you can alter them or use them for building up a new string. Each group can than be referred to using <code>\\N</code>, with <code>N</code> being the number of the grouping to be used.</p>
<p>An important note is the the regular expression pattern used with in <code>sub()</code> or <code>gsub()</code> and backreferences MUST consider the whole string and use <code>( )</code> to specify the parts you are interested in. With all other functions and examples, you can imply imput the specific string pattern you are looking for.</p>
<p>See <a href="https://www.stat.auckland.ac.nz/~paul/ItDT/HTML/node84.html#SECTION001526000000000000000">this</a> page in ‘Regular expressions in R’ for more.</p>
</div>
</div>
<div id="regular-expressions" class="section level2">
<h2><span class="header-section-number">5.2</span> Regular expressions</h2>
<div id="quantifiers" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Quantifiers</h3>
<p>How many times the letter/pattern occurs.</p>
<ul>
<li><code>*</code> - matches at least 0 times.</li>
<li><code>+</code> - matches at least 1 times.</li>
<li><code>?</code> - matches at most 1 times.</li>
<li><code>{n}</code> - matches exactly n times.</li>
<li><code>{n,}</code> - matches at least n times.</li>
<li><code>{n,m}</code> - matches between n and m times.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;ac*b&quot;</span>, strings, <span class="dt">value =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] &quot;ab&quot;     &quot;acb&quot;    &quot;accb&quot;   &quot;acccb&quot;  &quot;accccb&quot;</code></pre>
<p>This looks for pattern with ‘a’, 0 to infinite c(’s) and then b.</p>
</div>
<div id="position" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Position</h3>
<ul>
<li><code>^</code> - matches the start of the string.</li>
<li><code>$</code> - matches the end of the string.</li>
<li><code>\b</code> - matches the empty string at either edge of a word. Don’t confuse it with <code>^</code> and <code>$</code> which marks the edge of a string.</li>
<li><code>\B</code> - matches the empty string provided it is not at an edge of a word.</li>
</ul>
</div>
<div id="operators" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Operators</h3>
<ul>
<li><code>*</code> - matches any single character, as shown in the first example.</li>
<li><code>[...]</code> - a character list, matches any one of the characters inside the square brackets. We can also use <code>-</code> inside the brackets to specify a range of characters.</li>
<li><code>[^...]</code> - an inverted character list, similar to <code>[...]</code>, but matches any characters except those inside the square brackets.</li>
<li><code>\</code> - suppress the special meaning of metacharacters in the regular expression. Metacharacters in R are: <code>$ * + . ? [ ] ^ { } | ( ) \</code>. Further, since <code>\</code> itself needs to be escaped in R, we need to escape these metacharacters with double backslash (E.g. <code>\\$</code>). This is unique to R. (See <a href="https://stackoverflow.com/questions/26665100/how-to-use-the-strsplit-function-with-a-period">this</a> question on SO for more.</li>
<li><code>|</code> - an ‘or’ operator. Matches patterns on either side of the |.</li>
<li><code>(...)</code> - grouping in regular expressions. Each group can than be referred to using <code>\\N</code> - see backreferennces above. with <code>N</code> being the No. of (…) used.</li>
</ul>
</div>
<div id="character-classes" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Character classes</h3>
<ul>
<li><code>[:digit:]</code> or <code>\\d</code> - digits, 0 1 2 3 4 5 6 7 8 9, equivalent to <code>[0-9]</code>.</li>
<li><code>\D</code> - non-digits, equivalent to <code>[^0-9]</code>.</li>
<li><code>[:lower:]</code> - lower-case letters, equivalent to <code>[a-z]</code>.</li>
<li><code>[:upper:]</code> - upper-case letters, equivalent to <code>[A-Z]</code>.</li>
<li><code>[:alpha:]</code> - alphabetic characters, equivalent to <code>[[:lower:][:upper:]]</code> or <code>[A-z]</code>.</li>
<li><code>[:alnum:]</code> - alphanumeric characters, equivalent to <code>[[:alpha:][:digit:]]</code> or <code>[A-z0-9]</code>.</li>
<li><code>\w</code> - word characters (any character used in words), equivalent to <code>[[:alnum:]_]</code> or <code>[A-z0-9_]</code>.</li>
<li><code>\W</code> - not word, equivalent to <code>[^A-z0-9_]</code>.</li>
<li><code>[:xdigit:]</code> - hexadecimal digits (base 16), 0 1 2 3 4 5 6 7 8 9 A B C D E F a b c d e f, equivalent to <code>[0-9A-Fa-f]</code>.</li>
<li><code>[:blank:]</code> - blank characters, i.e. space and tab.</li>
<li><code>[:space:]</code> - space characters: tab, newline, vertical tab, form feed, carriage return, space.</li>
<li><code>\s</code> - space, ` `.</li>
<li><code>\S</code> - not space.</li>
<li><code>[:punct:]</code> - punctuation characters, ! &quot; # $ % &amp; ’ ( ) * + , - . / : ; &lt; = &gt; ? @ [ ] ^ _ ` { | } ~.</li>
<li><code>[:graph:]</code> - graphical (human readable) characters: equivalent to <code>[[:alnum:][:punct:]]</code>.</li>
<li><code>[:print:]</code> - printable characters, equivalent to <code>[[:alnum:][:punct:]\\s]</code>.</li>
<li><code>[:cntrl:]</code> - control characters, like or , <code>[\x00-\x1F\x7F]</code>.</li>
</ul>
<p>Notes: * <code>[:...:]</code> has to be used inside square brackets, e.g. <code>[[:digit:]]</code>. * <code>\</code> itself is a special character that needs escape, e.g. <code>\\d</code>. Do not confuse these regular expressions with R escape sequences such as .</p>
</div>
<div id="examples" class="section level3">
<h3><span class="header-section-number">5.2.5</span> Examples</h3>
<p>Too look for a string that is ALL (or only) digits/letters, use <code>^</code> and <code>$</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;^[[:digit:]]+$&quot;</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-wrangling-tidyverse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="control-flow.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-stringmanip.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["R notes.pdf", "R notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
